<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>51Degrees Device Detection C/C++: Hash/MetaData.cpp</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>

<link href="docs-main.min.css" rel="stylesheet" type="text/css" />

</head>
<body class="l-docs-index p-doxygen">
<div class="l-index__content">
<!--div id="top"--><!-- do not remove this div, it is closed by doxygen! -->


<div id="titlearea" class="g-header g-header--docs">
  <h1 class="c-brand">
  
  <a id="projectlogo" href="../../documentation/4.1/index.html" class="c-brand__link"><img class="c-brand__image" alt="Logo" src="logo-51Degrees-Docs.png"/></a>
  
  <span class="c-tagline">51Degrees Device Detection C/C++
   &#160;<span id="projectnumber">4.1</span>
  </span>
  
  </h1>
  
  <div id="projectalign" style="padding-left: 0.5em;">
   <div id="projectbrief">A device detection library that is used natively or by 51Degrees products</div>
  </div>
  
  <div id="main-nav"></div>
  
   
     <div class="g-search">
    <div class="c-search is-openable">
    <form class="c-search__form">
      <div id="MSearchBox" class="b-form-group b-form-group--with-icon">
        <label for="inputSearch" class="b-text--hidden">Search</label>
        <img id="MSearchSelect" src="icon-search.svg" class="b-icon" alt="Search" 
                 onmouseover="return searchBox.OnSearchSelectShow()"
                 onmouseout="return searchBox.OnSearchSelectHide()"/>
        <input type="text" id="MSearchField" autocomplete="off" class="c-search__input" id="inputSearch" placeholder="Type a class, namespace etc." aria-label="Search"
                 onfocus="searchBox.OnSearchFieldFocus(true)" 
                 onblur="searchBox.OnSearchFieldFocus(false)" 
                 onkeyup="searchBox.OnSearchFieldChange(event)">
         <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
      </div>
    </form>
  </div>
</div>

   
  
</div>

<!-- end header part -->
<main class="g-main">
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<!-- top -->
	<div class="g-docs__sidenav">																														         <nav id="nav-tree-contents" class="c-sidenav">																														     <h4 class="c-sidenav__heading">Documentation</h4>																									         <div id="nav-sync" class="sync"></div>
  <ul class="c-sidenav__list">																														     </ul>																																				   </nav>    </div><script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_hash_2_meta_data_8cpp-example.html','');});
/* @license-end */
</script>
<div id="doc-content" class="g-docs__content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="g-docs__header">
<h2 class="g-docs__page-title">Hash/MetaData.cpp</h2></div><!--header-->
<div class="g-docs__inner">
<div class="g-docs__primary" id="primary">
<p>Meta data example of using 51Degrees device detection.The example shows how to:</p>
<ol type="1">
<li>Specify the name of the data file, properties the data set should be initialised with, and the configuration. <div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees.html">FiftyoneDegrees</a>;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keywordtype">string</span> fileName = <span class="c-code__stringliteral">&quot;51Degrees-V3.4.trie&quot;</span>;</div><div class="c-code__line"><span class="c-code__keywordtype">string</span> propertiesString = <span class="c-code__stringliteral">&quot;ScreenPixelsWidth,HardwareModel,IsMobile,BrowserName&quot;</span>;</div><div class="c-code__line"><a name="_a0"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_required_properties_config.html">Common::RequiredPropertiesConfig</a> *properties =</div><div class="c-code__line">    <span class="c-code__keyword">new</span> <a class="code" href="class_fiftyone_degrees_1_1_common_1_1_required_properties_config.html">Common::RequiredPropertiesConfig</a>(&amp;propertiesString);</div><div class="c-code__line"><a name="_a1"></a><a class="code" href="class_fiftyone_degrees_1_1_device_detection_1_1_hash_1_1_config_hash.html">DeviceDetection::Hash::ConfigHash</a> *config =</div><div class="c-code__line">    <span class="c-code__keyword">new</span> <a name="a2"></a><a class="code" href="group___fifty_one_degrees_hash_synonyms.html#ga57af4ba244b4cebab0cf24de6d6d3008">DeviceDetection::Hash::ConfigHash</a>();</div></div></li>
<li>Construct a new engine from the specified data file with the required properties and the specified configuration. <div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees.html">FiftyoneDegrees</a>;</div><div class="c-code__line"></div><div class="c-code__line"><a name="_a3"></a><a class="code" href="class_fiftyone_degrees_1_1_device_detection_1_1_hash_1_1_engine_hash.html">DeviceDetection::Hash::EngineHash</a> *engine =</div><div class="c-code__line">    <span class="c-code__keyword">new</span> <a class="code" href="class_fiftyone_degrees_1_1_device_detection_1_1_hash_1_1_engine_hash.html">DeviceDetection::Hash::EngineHash</a>(</div><div class="c-code__line">        dataFilePath,</div><div class="c-code__line">        config,</div><div class="c-code__line">        properties);</div></div></li>
<li>Fetch a collection containing the meta data of all the properties in the engine's data set. <div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees.html">FiftyoneDegrees</a>;</div><div class="c-code__line"></div><div class="c-code__line"><a name="_a4"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_collection.html">Common::Collection&lt;string, Common::PropertyMetaData&gt;</a> *properties =</div><div class="c-code__line">    engine-&gt;<a name="a5"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_engine_base.html#a71c5f3d5754224aa9ddc770e294d86df">getMetaData</a>()-&gt;<a name="a6"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_meta_data.html#a71b147af3f36e0cb7f2bfe587898f974">getProperties</a>();</div></div></li>
<li>Iterate over all the properties and print the name and description. Note that getting a property meta data instance will return a new instance which holds no reference to the engine nor any of its internals. Therefore it is the responsibility of the caller to delete it once it is no longer needed. <div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees.html">FiftyoneDegrees</a>;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keywordflow">for</span> (uint32_t i = 0; i &lt; properties-&gt;<a name="a7"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_collection.html#a88f416eb8fe8b2723d91a00318963d4b">getSize</a>(); i++){</div><div class="c-code__line">    <a name="_a8"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_property_meta_data.html">Common::PropertyMetaData</a> *<span class="c-code__keyword">property</span> = properties-&gt;<a name="a9"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_collection.html#a33230699de6973ebd4d685543007834c">getByIndex</a>(i);</div><div class="c-code__line">    cout &lt;&lt; <span class="c-code__keyword">property</span>-&gt;<a name="a10"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_property_meta_data.html#a33442325a593704e2e65df3165a14eda">getName</a>() &lt;&lt; <span class="c-code__stringliteral">&quot; - &quot;</span> &lt;&lt; <span class="c-code__keyword">property</span>-&gt;getDescription() &lt;&lt; <span class="c-code__stringliteral">&quot;\n&quot;</span>;</div><div class="c-code__line">    <span class="c-code__keyword">delete</span> property;</div><div class="c-code__line">}</div></div></li>
<li>Release the memory used by the properties collection, and its reference to the engine's underlying data set. <div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__keyword">delete</span> properties;</div></div></li>
<li>Finally release the memory used by the engine. <div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__keyword">delete</span> engine;</div></div></li>
</ol>
<div class="c-code__block c-code__block--outline"><div class="c-code__line"><span class="c-code__comment">/* *********************************************************************</span></div><div class="c-code__line"><span class="c-code__comment"> * This Source Code Form is copyright of 51 Degrees Mobile Experts Limited.</span></div><div class="c-code__line"><span class="c-code__comment"> * Copyright 2019 51 Degrees Mobile Experts Limited, 5 Charlotte Close,</span></div><div class="c-code__line"><span class="c-code__comment"> * Caversham, Reading, Berkshire, United Kingdom RG4 7BY</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Source Code Form is subject to the terms of the Mozilla Public</span></div><div class="c-code__line"><span class="c-code__comment"> * License, v. 2.0.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * If a copy of the MPL was not distributed with this file, You can obtain</span></div><div class="c-code__line"><span class="c-code__comment"> * one at http://mozilla.org/MPL/2.0/.</span></div><div class="c-code__line"><span class="c-code__comment"> *</span></div><div class="c-code__line"><span class="c-code__comment"> * This Source Code Form is &quot;Incompatible With Secondary Licenses&quot;, as</span></div><div class="c-code__line"><span class="c-code__comment"> * defined by the Mozilla Public License, v. 2.0.</span></div><div class="c-code__line"><span class="c-code__comment"> * ********************************************************************* */</span></div><div class="c-code__line"> </div><div class="c-code__line"><span class="c-code__preprocessor"> #include &lt;string&gt;</span></div><div class="c-code__line"><span class="c-code__preprocessor">#include &lt;iostream&gt;</span></div><div class="c-code__line"><span class="c-code__preprocessor">#include &quot;../../../src/hash/EngineHash.hpp&quot;</span></div><div class="c-code__line"><span class="c-code__preprocessor">#include &quot;ExampleBase.hpp&quot;</span></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">using namespace </span>std;</div><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees_1_1_common.html">FiftyoneDegrees::Common</a>;</div><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees_1_1_device_detection.html">FiftyoneDegrees::DeviceDetection</a>;</div><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees_1_1_device_detection_1_1_hash.html">FiftyoneDegrees::DeviceDetection::Hash</a>;</div><div class="c-code__line"><span class="c-code__keyword">using namespace </span><a class="code" href="namespace_fiftyone_degrees_1_1_examples_1_1_hash.html">FiftyoneDegrees::Examples::Hash</a>;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keyword">namespace </span><a class="code" href="namespace_fiftyone_degrees.html">FiftyoneDegrees</a> {</div><div class="c-code__line">    <span class="c-code__keyword">namespace </span>Examples {</div><div class="c-code__line">        <span class="c-code__keyword">namespace </span>Hash {</div><div class="c-code__line">            <span class="c-code__keyword">class </span><a name="_a11"></a><a class="code" href="class_fiftyone_degrees_1_1_examples_1_1_hash_1_1_meta_data_example.html">MetaDataExample</a> : <span class="c-code__keyword">public</span> <a name="_a12"></a><a class="code" href="class_fiftyone_degrees_1_1_examples_1_1_hash_1_1_example_base.html">ExampleBase</a> {</div><div class="c-code__line">            <span class="c-code__keyword">public</span>:</div><div class="c-code__line">                <a class="code" href="class_fiftyone_degrees_1_1_examples_1_1_hash_1_1_meta_data_example.html">MetaDataExample</a>(<span class="c-code__keywordtype">string</span> dataFilePath)</div><div class="c-code__line">                    : <a class="code" href="class_fiftyone_degrees_1_1_examples_1_1_hash_1_1_example_base.html">ExampleBase</a>(dataFilePath)</div><div class="c-code__line">                {};</div><div class="c-code__line"></div><div class="c-code__line">                <span class="c-code__keywordtype">void</span> run() {</div><div class="c-code__line">                    <a class="code" href="class_fiftyone_degrees_1_1_common_1_1_property_meta_data.html">PropertyMetaData</a> *property;</div><div class="c-code__line">                    <a name="_a13"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_collection.html">Collection&lt;string, PropertyMetaData&gt;</a> *properties;</div><div class="c-code__line">                    cout &lt;&lt; <span class="c-code__stringliteral">&quot;Starting MetaData Example.\n&quot;</span>;</div><div class="c-code__line">                    properties = engine-&gt;<a class="code" href="class_fiftyone_degrees_1_1_common_1_1_engine_base.html#a71c5f3d5754224aa9ddc770e294d86df">getMetaData</a>()-&gt;<a class="code" href="class_fiftyone_degrees_1_1_common_1_1_meta_data.html#a71b147af3f36e0cb7f2bfe587898f974">getProperties</a>();</div><div class="c-code__line">                    <span class="c-code__keywordflow">for</span> (uint32_t i = 0; i &lt; properties-&gt;<a name="a14"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_collection.html#a88f416eb8fe8b2723d91a00318963d4b">getSize</a>(); i++){</div><div class="c-code__line">                        <span class="c-code__keyword">property</span> = properties-&gt;<a name="a15"></a><a class="code" href="class_fiftyone_degrees_1_1_common_1_1_collection.html#a33230699de6973ebd4d685543007834c">getByIndex</a>(i);</div><div class="c-code__line">                        cout &lt;&lt; <span class="c-code__keyword">property</span>-&gt;<a class="code" href="class_fiftyone_degrees_1_1_common_1_1_property_meta_data.html#a33442325a593704e2e65df3165a14eda">getName</a>() &lt;&lt; <span class="c-code__stringliteral">&quot; - &quot;</span> &lt;&lt; <span class="c-code__keyword">property</span>-&gt;getDescription() &lt;&lt; <span class="c-code__stringliteral">&quot;\n&quot;</span>;</div><div class="c-code__line">                        <span class="c-code__keyword">delete</span> property;</div><div class="c-code__line">                    }</div><div class="c-code__line">                    <span class="c-code__keyword">delete</span> properties;</div><div class="c-code__line">                }</div><div class="c-code__line">            };</div><div class="c-code__line">        }</div><div class="c-code__line">    }</div><div class="c-code__line">}</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__keywordtype">int</span> main(<span class="c-code__keywordtype">int</span> argc, <span class="c-code__keywordtype">char</span>* argv[]) {</div><div class="c-code__line">    <a class="code" href="group___fifty_one_degrees_status.html#ga887881c8b6ec9f0c8510913831ebd19e">fiftyoneDegreesStatusCode</a> status = <a name="a16"></a><a class="code" href="group___fifty_one_degrees_status.html#gga887881c8b6ec9f0c8510913831ebd19ea7c080613fa211ed9bb9f3a58f4a433d4">FIFTYONE_DEGREES_STATUS_SUCCESS</a>;</div><div class="c-code__line">    <span class="c-code__keywordtype">char</span> dataFilePath[<a name="a17"></a><a class="code" href="group___fifty_one_degrees_file.html#gaf3ee91aae926f0082ceb3bd0b291bee1">FIFTYONE_DEGREES_FILE_MAX_PATH</a>];</div><div class="c-code__line">    <span class="c-code__keywordflow">if</span> (argc &gt; 1) {</div><div class="c-code__line">        strcpy(dataFilePath, argv[1]);</div><div class="c-code__line">    }</div><div class="c-code__line">    <span class="c-code__keywordflow">else</span> {</div><div class="c-code__line">        status = <a name="a18"></a><a class="code" href="group___fifty_one_degrees_file.html#ga4e9ee974004d4bb4f961fc033a584e66">fiftyoneDegreesFileGetPath</a>(</div><div class="c-code__line">            dataDir,</div><div class="c-code__line">            dataFileName,</div><div class="c-code__line">            dataFilePath,</div><div class="c-code__line">            <span class="c-code__keyword">sizeof</span>(dataFilePath));</div><div class="c-code__line">    }</div><div class="c-code__line">    <span class="c-code__keywordflow">if</span> (status != <a class="code" href="group___fifty_one_degrees_status.html#gga887881c8b6ec9f0c8510913831ebd19ea7c080613fa211ed9bb9f3a58f4a433d4">FIFTYONE_DEGREES_STATUS_SUCCESS</a>) {</div><div class="c-code__line">        ExampleBase::reportStatus(status, dataFileName);</div><div class="c-code__line">        fgetc(stdin);</div><div class="c-code__line">        <span class="c-code__keywordflow">return</span> 1;</div><div class="c-code__line">    }</div><div class="c-code__line"></div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__preprocessor">#ifdef _DEBUG</span></div><div class="c-code__line"><span class="c-code__preprocessor">#ifndef _MSC_VER</span></div><div class="c-code__line">    dmalloc_debug_setup(<span class="c-code__stringliteral">&quot;log-stats,log-non-free,check-fence,log=dmalloc.log&quot;</span>);</div><div class="c-code__line"><span class="c-code__preprocessor">#endif</span></div><div class="c-code__line"><span class="c-code__preprocessor">#endif</span></div><div class="c-code__line"></div><div class="c-code__line">    <a class="code" href="class_fiftyone_degrees_1_1_examples_1_1_hash_1_1_meta_data_example.html">MetaDataExample</a> *metaData = <span class="c-code__keyword">new</span> <a class="code" href="class_fiftyone_degrees_1_1_examples_1_1_hash_1_1_meta_data_example.html">MetaDataExample</a>(dataFilePath);</div><div class="c-code__line">    metaData-&gt;<a name="a19"></a><a class="code" href="class_fiftyone_degrees_1_1_examples_1_1_hash_1_1_meta_data_example.html#a6483e99232c8f4f9b0d18871a0c48c1d">run</a>();</div><div class="c-code__line">    <span class="c-code__keyword">delete</span> metaData;</div><div class="c-code__line"></div><div class="c-code__line"><span class="c-code__preprocessor">#ifdef _DEBUG</span></div><div class="c-code__line"><span class="c-code__preprocessor">#ifdef _MSC_VER</span></div><div class="c-code__line">    _CrtDumpMemoryLeaks();</div><div class="c-code__line"><span class="c-code__preprocessor">#else</span></div><div class="c-code__line">    printf(<span class="c-code__stringliteral">&quot;Log file is %s\r\n&quot;</span>, dmalloc_logpath);</div><div class="c-code__line"><span class="c-code__preprocessor">#endif</span></div><div class="c-code__line"><span class="c-code__preprocessor">#endif</span></div><div class="c-code__line"></div><div class="c-code__line">    <span class="c-code__comment">// Wait for a character to be pressed.</span></div><div class="c-code__line">    fgetc(stdin);</div><div class="c-code__line"></div><div class="c-code__line">    <span class="c-code__keywordflow">return</span> 0;</div><div class="c-code__line">}</div></div> </div><!-- primary -->
</div><!-- inner-->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<section id="nav-path" class="g-footer g-footer--docs"><!-- id is needed for treeview function! -->
    <p class="g-footer__copyright">Generated by
    <a href="http://www.doxygen.org/index.html">
    <b>doxygen</b></a> 1.8.15
  </p>
</section>
</div>
</main>
</div>
</body>
</html>
